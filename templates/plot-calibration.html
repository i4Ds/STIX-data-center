

{% extends "base-plotting.html" %}
{% block title %}STIX calibration data viewer{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='vendor/css/bootstrap-datetimepicker.min.css')}}">
<link rel="stylesheet" href="{{ url_for('static', filename='vendor/css/jquery.dataTables.min.css')}}">
<script src="{{ url_for('static', filename='vendor/js/bootstrap-datetimepicker.js')}}"></script>
{% endblock %}
{% block top_navi_title%} 
Calibration data
{% endblock %}
{% block main_title_bar%} 
{% if message is defined %}
{{message}}
{% else %}
Calibration data
{%endif%}

{% endblock %}


{% block  main_container%} 

<a class="btn btn-primary" data-toggle="collapse" href="#calibration-run-list" role="button" aria-expanded="false" aria-controls="calibration-run-list">
	  Calibration run list
  </a>
  <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#plots" aria-expanded="false" aria-controls="plots">
	  Plots
  </button>


<div class="collapse" id="calibration-run-list">
  <div class="card card-body" style="height:400px; overflow:scroll">
	  		<table class="table table-sm table-striped table-bordered table-hover" id="calibration-runs-table">
				<thead>
					<tr>
						<th class="sortable-column sort-desc">ID</th>
						<th>Packet header time</th>
						<th>Start time</th>
						<th>Duration (s)</th>
						<th>TM packets</th>
						<th>Plot</th>
					</tr>
				</thead>
				<tbody >
				</tbody>
			</table>

  </div>
</div>
<div class="collapse show" id="plots">
  <div class="card card-body">
	<div class="row d-flex justify-content-center">
		<table class="table table-sm table-striped table-bordered table-hover" id="calibration-run-info"></table>
			<div class="col-md-6">
				<div id="counts2d"></div>
			</div>
			<div class="col-md-6">
				<div id="spectrum"></div>
			</div>
		</div>

  </div>
</div>




{% endblock %}


{% block before_js%}
{% if start_unix is not defined%}
{% set start_unix=0 %}
{% endif %}
{% if span_sec is not defined%}
{% set span_sec=0 %}
{% endif %}
{% if calibration_id is not defined%}
{% set calibration_id=-2 %}
{% endif %}

<script>
	window.startUnix={{start_unix}};
window.timeSpanSeconds={{span_sec}};
window.calibrationId={{calibration_id}};
</script>

{% endblock %}

{% block after_js %}
<script src="{{ url_for('static', filename='js/calibration.plot.response.js')}}"></script>
<script src="{{ url_for('static', filename='vendor/js/jquery.dataTables.min.js')}}"></script>
<script src="{{ url_for('static', filename='vendor/js/dataTables.bootstrap4.min.js')}}"></script>
<script>
	$(function () {
		$('.form_datetime').datetimepicker( {format: "yyyy-mm-ddThh:ii:ss"});
	//	$(".nav-tabs a").click(function(){
	//		$(this).tab('show'); });


		});
		
</script>
{% endblock %}



